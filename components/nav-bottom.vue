<template>
  <div>
    <!-- upper bar, style -->
    <nuxt-picture
      format="webp"
      src="/deco_footer_head.png"
      :img-attrs="{
        class: 'w-full',
      }"
    ></nuxt-picture>
    <!-- 3 sections -->
    <div
      class="
        border-t-4
        md:border-t-8
        border-white
        bg-site-yellow
        divide-y-2 divide-white
        md:divide-y-0 md:divide-x-4 md:flex
      "
    >
      <!-- with location  -->
      <div v-if="withMap" class="p-[30px] md:flex-1">
        <div class="footer-title">
          {{ constants.location }}
        </div>
        <div class="border-[3px] border-white mt-4 w-full">
          <iframe
            class="aspect-[500/500] w-full"
            src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d27408.379413802566!2d75.22553636978581!3d30.829337199999983!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0xcbf0f73d225708c3!2sGurdwara%20Prabh%20Milne%20Ka%20Chao!5e0!3m2!1sen!2sin!4v1652873807440!5m2!1sen!2sin"
            style="border: 0"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </div>
      <!-- follow us -->
      <div v-else class="p-[30px] md:flex-1">
        <div class="footer-title">
          {{ constants.followUs }}
        </div>
        <!-- social icons  -->

        <div class="p-2.5 bg-white mt-5 flex flex-wrap gap-1.5">
          <nav-bottom-social-link
            color="#0079FE"
            :url="constants.websiteUrl"
            :title="constants.website"
            svgPath="M16.994 8.241h3.879c0.52 1.156 0.83 2.422 0.883 3.759h-4.45c-0.019-1.413-0.136-2.658-0.312-3.759zM15.299 2.922c2.225 0.865 4.052 2.501 5.196 4.568h-3.627c-0.412-2.104-1.037-3.599-1.569-4.567zM12.051 7.49v-5.247c0.799 0.035 1.576 0.162 2.319 0.37 0.563 0.947 1.289 2.529 1.747 4.877h-4.066zM7.117 16.511c-0.176-1.102-0.297-2.339-0.316-3.759h4.499v3.759h-4.183zM7.109 8.241h4.19v3.759h-4.503c0.019-1.415 0.137-2.657 0.313-3.759zM8.991 2.596c0.74-0.2 1.511-0.326 2.308-0.352v5.246h-4.066c0.461-2.361 1.193-3.949 1.758-4.894zM2.746 7.49c1.163-2.1 3.047-3.745 5.322-4.598-0.536 0.968-1.169 2.471-1.585 4.598h-3.737zM6.045 12h-4.545c0.049-1.336 0.35-2.605 0.868-3.759h3.987c-0.175 1.102-0.293 2.346-0.311 3.759zM6.365 16.511h-3.967c-0.521-1.157-0.854-2.418-0.903-3.759h4.553c0.018 1.42 0.141 2.656 0.317 3.759zM6.488 17.262c0.419 2.148 1.062 3.65 1.601 4.606-2.284-0.85-4.168-2.501-5.333-4.606h3.732zM11.3 17.262v5.245c-0.789-0.025-1.55-0.149-2.284-0.345-0.566-0.927-1.302-2.522-1.767-4.9h4.051zM16.103 17.262c-0.463 2.364-1.194 3.953-1.758 4.884-0.734 0.203-1.505 0.313-2.294 0.349v-5.233h4.052zM12.051 12.752h4.498c-0.017 1.42-0.141 2.656-0.317 3.759h-4.182v-3.759zM16.554 12h-4.503v-3.759h4.189c0.176 1.102 0.295 2.345 0.313 3.759zM17.303 12.752h4.444c-0.049 1.34-0.38 2.601-0.898 3.759h-3.864c0.176-1.103 0.299-2.339 0.317-3.759zM20.489 17.262c-1.141 2.074-2.975 3.712-5.21 4.575 0.536-0.957 1.171-2.449 1.585-4.575h3.626z"
          />
          <!-- youtube -->
          <nav-bottom-social-link
            color="#FF0000"
            :url="constants.youtubeUrl"
            :title="constants.youtube"
            svgPath="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
          />
          <!-- instagram -->
          <nav-bottom-social-link
            color="#E4405F"
            :url="constants.instagramUrl"
            :title="constants.instagram"
            svgPath="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"
          />
          <!-- twitter -->
          <nav-bottom-social-link
            color="#1DA1F2"
            :url="constants.twitterUrl"
            :title="constants.twitter"
            svgPath="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"
          />
          <!-- facebook -->
          <nav-bottom-social-link
            color="#1877F2"
            :url="constants.facebookUrl"
            :title="constants.facebook"
            svgPath="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
          />
          <!-- soundcloud -->
          <nav-bottom-social-link
            color="#FF3300"
            :url="constants.soundCloudUrl"
            :title="constants.soundCloud"
            svgPath="M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c0-.057-.045-.1-.09-.1m-.899.828c-.06 0-.091.037-.104.094L0 14.479l.165 1.308c0 .055.045.094.09.094s.089-.045.104-.104l.21-1.319-.21-1.334c0-.061-.044-.09-.09-.09m1.83-1.229c-.061 0-.12.045-.12.104l-.21 2.563.225 2.458c0 .06.045.12.119.12.061 0 .105-.061.121-.12l.254-2.474-.254-2.548c-.016-.06-.061-.12-.121-.12m.945-.089c-.075 0-.135.06-.15.135l-.193 2.64.21 2.544c.016.077.075.138.149.138.075 0 .135-.061.15-.15l.24-2.532-.24-2.623c0-.075-.06-.135-.135-.135l-.031-.017zm1.155.36c-.005-.09-.075-.149-.159-.149-.09 0-.158.06-.164.149l-.217 2.43.2 2.563c0 .09.075.157.159.157.074 0 .148-.068.148-.158l.227-2.563-.227-2.444.033.015zm.809-1.709c-.101 0-.18.09-.18.181l-.21 3.957.187 2.563c0 .09.08.164.18.164.094 0 .174-.09.18-.18l.209-2.563-.209-3.972c-.008-.104-.088-.18-.18-.18m.959-.914c-.105 0-.195.09-.203.194l-.18 4.872.165 2.548c0 .12.09.209.195.209.104 0 .194-.089.21-.209l.193-2.548-.192-4.856c-.016-.12-.105-.21-.21-.21m.989-.449c-.121 0-.211.089-.225.209l-.165 5.275.165 2.52c.014.119.104.225.225.225.119 0 .225-.105.225-.225l.195-2.52-.196-5.275c0-.12-.105-.225-.225-.225m1.245.045c0-.135-.105-.24-.24-.24-.119 0-.24.105-.24.24l-.149 5.441.149 2.503c.016.135.121.24.256.24s.24-.105.24-.24l.164-2.503-.164-5.456-.016.015zm.749-.134c-.135 0-.255.119-.255.254l-.15 5.322.15 2.473c0 .15.12.255.255.255s.255-.12.255-.27l.15-2.474-.165-5.307c0-.148-.12-.27-.271-.27m1.005.166c-.164 0-.284.135-.284.285l-.103 5.143.135 2.474c0 .149.119.277.284.277.149 0 .271-.12.284-.285l.121-2.443-.135-5.112c-.012-.164-.135-.285-.285-.285m1.184-.945c-.045-.029-.105-.044-.165-.044s-.119.015-.165.044c-.09.054-.149.15-.149.255v.061l-.104 6.048.115 2.449v.008c.008.06.03.135.074.18.058.061.142.104.234.104.08 0 .158-.044.209-.09.058-.06.091-.135.091-.225l.015-.24.117-2.203-.135-6.086c0-.104-.061-.193-.135-.239l-.002-.022zm1.006-.547c-.045-.045-.09-.061-.15-.061-.074 0-.149.016-.209.061-.075.061-.119.15-.119.24v.029l-.137 6.609.076 1.215.061 1.185c0 .164.148.314.328.314.181 0 .33-.15.33-.329l.15-2.414-.15-6.637c0-.12-.074-.221-.165-.277m8.934 3.777c-.405 0-.795.086-1.139.232-.24-2.654-2.46-4.736-5.188-4.736-.659 0-1.305.135-1.889.359-.225.09-.27.18-.285.359v9.368c.016.18.15.33.33.345h8.185C22.681 17.218 24 15.914 24 14.28s-1.319-2.952-2.938-2.952"
          />
          <!-- archive -->
          <nav-bottom-social-link
            color="#666666"
            :url="constants.audioGalleryLink"
            :title="constants.internetArchive"
            svgPath="M22.667 22.884V24H1.333v-1.116zm-.842-1.675v1.396H2.175v-1.396zM4.233 6.14l.234.118.118 1.882.117 3.058v2.941l-.117 3.666-.02 2.47-.332.098H3.062l-.352-.098-.136-2.47-.118-3.646v-2.941l.118-3.078.107-1.892.244-.107zm16.842 0l.235.118.117 1.882.117 3.058v2.941l-.117 3.666-.02 2.47-.332.098h-1.171l-.352-.098-.137-2.47-.117-3.646v-2.941l.117-3.078.108-1.892.244-.107zm-11.79 0l.235.118.117 1.882.117 3.058v2.941l-.117 3.666-.02 2.47-.331.098H8.114l-.352-.098-.136-2.47-.117-3.646v-2.941l.117-3.078.107-1.892.244-.107zm6.457 0l.234.118.117 1.882.118 3.058v2.941l-.118 3.666-.019 2.47-.332.098H14.57l-.351-.098-.137-2.47-.117-3.646v-2.941l.117-3.078.108-1.892.244-.107zm6.083-2.511V5.58H2.175V3.628zM11.798 0l10.307 2.347-.413.723H1.951l-.618-.587Z"
          />
        </div>
        <!-- whatsapp contact button -->
        <a :href="`tel:${constants.phoneNumber}`">
          <div
            class="
              bg-white
              mt-5
              py-2.5
              text-[#455A65]
              flex flex-col
              items-center
              px-4
              inline-flex
            "
          >
            <svg
              class="mb-4 w-11 h-11 fill-current"
              role="img"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <title>{{ constants.whatsapp }}</title>
              <path
                d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"
              />
            </svg>
            <div class="font-roboto-slab text-lg">
              {{ constants.phoneNumber }}
            </div>
          </div>
        </a>
      </div>
      <!-- get in touch -->
      <div class="p-[30px] md:flex-1">
        <div class="footer-title">
          {{ constants.getInTouch }}
        </div>
        <div class="mt-4 font-roboto-slab font-medium text-xl leading-none">
          {{ constants.gurdwaraNameFooter }}
        </div>
        <div class="mt-1.5 font-roboto text-xl leading-none text-site-gray">
          {{ constants.universityNameFooter }}
        </div>
        <div
          class="font-roboto-slab text-sm font-medium leading-loose"
          v-html="constants.gurdwaraInfoFooter"
        />
      </div>
      <!-- quick contact -->
      <div class="p-[30px] md:flex-1">
        <div class="footer-title">
          {{ constants.quickContact }}
        </div>
        <form
          @submit.prevent="submitQuickContact"
          class="mt-4 flex flex-col gap-2"
        >
          <input
            class="form__input"
            v-model.trim="$v.quickContactForm.subject.$model"
            required
            :placeholder="constants.subject"
          />
          <textarea
            class="form__input"
            rows="4"
            v-model.trim="$v.quickContactForm.body.$model"
            required
            :placeholder="constants.message"
          />
          <button
            type="submit"
            class="
              self-end
              bg-site-gray
              text-white text-[13px]
              px-2
              py-1
              font-roboto-slab
            "
          >
            {{ constants.email }}
          </button>
        </form>
      </div>
    </div>
    <!-- lower bar, copyright -->
    <div
      class="
        p-[35px]
        bg-site-dark-gray
        font-roboto
        leading-tight
        text-white text-center text-[15px]
        md:text-base md:leading-tight
      "
    >
      {{ constants.copyrightFooter }}
    </div>
  </div>
</template>

<script lang="ts">
import Vue from "vue";
import constants from "~/utils/constants";
import { validationMixin } from "vuelidate";
import { required } from "vuelidate/lib/validators";

export default Vue.extend({
  data() {
    return {
      constants,
      quickContactForm: {
        subject: "",
        body: "",
      },
    };
  },
  mixins: [validationMixin],
  validations: {
    quickContactForm: {
      subject: {
        required,
      },
      body: {
        required,
      },
    },
  },
  props: {
    withMap: {
      type: Boolean,
      default: false,
    },
  },
  methods: {
    submitQuickContact() {
      this.$v.quickContactForm.$touch();
      if (!this.$v.quickContactForm.$invalid) {
        // generate mail to link and fire here
        // https://github.com/ajitzero/mailto-link-builder/blob/master/src/script.vue
        let mailUrl = "mailto:" + constants.gpmkcEmail;
        const emailKeys = Object.keys(this.quickContactForm);
        mailUrl += "?";
        mailUrl += emailKeys
          .map(
            (key) => `${key}=${encodeURI(this.quickContactForm[key].trim())}`
          )
          .join("&");
        // https://www.codexworld.com/how-to/open-url-in-new-browser-window-tab-javascript
        window.open(mailUrl, "_blank");
        // clear form
        this.quickContactForm.subject = "";
        this.quickContactForm.body = "";
      }
    },
  },
});
</script>

<style scoped>
.footer-title {
  @apply py-2.5
            px-4
            bg-white
            font-krona-one
            text-black
            uppercase
            inline-flex
            text-center
            leading-none
            text-[15px];
}
.form__input {
  @apply py-1 px-3 font-roboto text-[13px];
}
</style>